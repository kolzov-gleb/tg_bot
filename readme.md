Запуск бота осуществляется путем запуска файла main.py. Структура бота:
Скрипт бота состоит из трех файлов main.py, api.pi и photo.py. Основной код в файле main.py. После запука скрипта бот ожидает команду старт в мессенджере. Получив ее скрипт очищает временную базу данных для этого пользователя и у пользователя появляется callback клавиатура, а бот начинает игнорировать простой текст отправленный пользователем. После выбора команды бот записывает команду (для команд lowprice, highprice, bestdeal) в файл, который является временной базой данных, индивидуальный для каждого пользователя. Дальше идет структура вопрос ответ, где бот собирает нужную для каждой команды информацию и записывает все в тот же файл. Затем загрузка данных из в файла в список из которого потом берется полученная от пользователя команда и формируется api запрос по полученным критериям. Следующим шагом данные с запроса формируются и фильтруются в список информации нужный пользователю, по необходимости запускается еще один api запрос для получения фотографий. После чего информация отправляется пользователю и записывается в постоянную базу данных пользователя.
Команда history выгружает из постоянной базы данных пользователя всю информацию и отправляет ее клиенту